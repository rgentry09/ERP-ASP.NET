@using GridBlazor.Resources
@using GridShared.Sorting
@using GridShared.Utility

@typeparam T
@inherits GridHeaderComponentBase<T>

<th class="@_cssClass" style="@_cssStyles">
    @if (Column.FilterEnabled)
    {
        <div class="grid-filter" data-type="@Column.FilterWidgetTypeName" data-name="@Column.Name" data-widgetdata="@JsonHelper.JsonSerializer(Column.FilterWidgetData)" data-filterdata="@JsonHelper.JsonSerializer(_filterSettings)" data-url="@_url" data-clearinitfilter="@_clearInitFilter.ToString()">
            <span class="@_cssFilterClass" title="@Strings.FilterButtonTooltipText" @onclick="@(() => FilterIconClicked())"></span>
            <CascadingValue Value=@this Name="GridHeaderComponent">
                @FilterWidgetRender
            </CascadingValue>
        </div>
    }
    @if (Column.ParentGrid.ExtSortingEnabled)
    {
        <div class="grid-extsort-draggable @_cssSortingClass" draggable="true" data-column="@Column.Name" @ondragstart="@(() => HandleDragStart())">
            @if (Column.SortEnabled)
            {
                if (Column.IsSorted)
                {
                    <button @onclick="TitleButtonClicked" data-column="@Column.Name" data-sorted="@(Column.Direction == GridSortDirection.Ascending ? "asc" : "desc")">@Column.Title</button>
                }
                else
                {
                    <button @onclick="TitleButtonClicked" data-column="@Column.Name">@Column.Title</button>
                }
            }
            else
            {
                <span data-column="@Column.Name">@Column.Title</span>
            }
            @if (Column.IsSorted)
            {
                <span class="grid-sort-arrow"></span>
            }
        </div>
    }
    else
    {
        <div class="@_cssSortingClass">
            @if (Column.SortEnabled)
            {
                <button @onclick="@(() => TitleButtonClicked())">@Column.Title</button>
            }
            else
            {
                <span>@Column.Title</span>
            }
            @if (Column.IsSorted)
            {
                <span class="grid-sort-arrow"></span>
            }
        </div>
    }
</th>


